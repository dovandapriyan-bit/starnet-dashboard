<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Starnet üí´ Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {margin:0;font-family:'Segoe UI',Arial,sans-serif;background:#f8f9fc;color:#333;}
    .sidebar {width:240px;transition:0.3s;height:100%;position:fixed;top:0;left:0;background:#4f46e5;color:#fff;padding-top:20px;overflow:hidden;}
    .sidebar.minimized {width:70px;}
    .sidebar h2 {text-align:center;margin:0 0 30px;font-size:20px;color:#fff;}
    .sidebar a {display:flex;align-items:center;color:#e0e7ff;padding:12px 20px;text-decoration:none;transition:0.2s;font-size:15px;white-space:nowrap;}
    .sidebar a:hover,.sidebar a.active {background:#3730a3;color:#fff;}
    .sidebar i {margin-right:10px;}
    .main {margin-left:240px;padding:25px;transition:0.3s;}
    .minimized ~ .main {margin-left:70px;}
    .hamburger {position:absolute;top:15px;right:-35px;background:#4f46e5;color:white;padding:8px;border-radius:50%;cursor:pointer;}
    .card {background:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.08);margin-bottom:20px;}
    .stat {display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:22px;font-weight:bold;}
    .stat small {font-size:14px;font-weight:normal;color:#666;}
    .grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;}
    table {width:100%;border-collapse:collapse;font-size:14px;}
    th,td {padding:10px;border-bottom:1px solid #e2e8f0;text-align:left;}
    th {background:#eef2ff;font-weight:600;}
    tr:hover {background:#f9fafb;}
    input,select {padding:8px;margin:6px 0;width:100%;border:1px solid #ccc;border-radius:6px;}
    button {padding:8px 14px;margin:4px 2px;border:none;border-radius:6px;cursor:pointer;font-size:14px;}
    button.primary {background:#4f46e5;color:white;}
    button.primary:hover {background:#3730a3;}
    button.danger {background:#ef4444;color:white;}
    button.success {background:#22c55e;color:white;}
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="hamburger" onclick="toggleSidebar()">‚ò∞</div>
    <h2 id="ispName">Starnet üí´</h2>
    <a href="#" class="active" onclick="showSection('dashboard',this)">üìä Dashboard</a>
    <a href="#" onclick="showSection('pasangbaru',this)">‚ûï Pasang Baru</a>
    <a href="#" onclick="showSection('pelanggan',this)">üë• Pelanggan</a>
    <a href="#" onclick="showSection('paket',this)">üì¶ Paket</a>
    <a href="#" onclick="showSection('billing',this)">üí≥ Billing</a>
    <a href="#" onclick="showSection('kas',this)">üí∞ Kas</a>
    <a href="#" onclick="showSection('teknisi',this)">üõ†Ô∏è Teknisi</a>
    <a href="#" onclick="showSection('gangguan',this)">‚ö†Ô∏è Gangguan</a>
    <a href="#" onclick="showSection('material',this)">üìë Material</a>
    <a href="#" onclick="showSection('odp',this)">üóÇÔ∏è ODP</a>
    <a href="#" onclick="showSection('editisp',this)">‚öôÔ∏è Edit ISP</a>
    <a href="#" onclick="logout()">üö™ Logout</a>
  </div>

  <!-- Main -->
  <div class="main">
    <!-- Dashboard -->
    <div id="dashboard" class="section">
      <h2>Dashboard</h2>
      <div class="grid">
        <div class="card"><div class="stat"><span id="totalUser">0</span><small>Total Pelanggan</small></div></div>
        <div class="card"><div class="stat"><span id="saldoKas">0</span><small>Saldo Kas</small></div></div>
        <div class="card"><div class="stat"><span id="totalGangguan">0</span><small>Gangguan Aktif</small></div></div>
        <div class="card"><div class="stat"><span id="ttrOpen">00:00:00</span><small>TTR Gangguan Open</small></div></div>
      </div>
      <div class="card"><canvas id="ispChart"></canvas></div>
    </div>

    <!-- Pasang Baru -->
    <div id="pasangbaru" class="section" style="display:none;">
      <h2>Pasang Baru</h2>
      <form id="pasangForm">
        <label>No Internet</label><input id="noInet" required>
        <label>Nama</label><input id="namaPB" required>
        <label>Alamat</label><input id="alamatPB" required>
        <label>No HP</label><input id="hpPB" required>
        <label>SN ONT</label><input id="snPB" required>
        <label>ODP</label><input id="odpPB" required>
        <label>Tag Lokasi</label><input id="tagPB" required>
        <button class="primary" type="submit">Simpan</button>
      </form>
    </div>

    <!-- Pelanggan -->
    <div id="pelanggan" class="section" style="display:none;">
      <h2>Pelanggan</h2>
      <input id="searchPelanggan" placeholder="Cari Nama / ODP / SN / No Inet">
      <div class="card">
        <table id="pelangganTable">
          <thead><tr><th>No Inet</th><th>Nama</th><th>Alamat</th><th>HP</th><th>Paket</th><th>SN ONT</th><th>ODP</th><th>Redaman</th><th>Lokasi</th><th>Aksi</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <!-- Paket -->
    <div id="paket" class="section" style="display:none;">
      <h2>Paket & Promo</h2>
      <form id="paketForm">
        <input type="hidden" id="paketId">
        <label>Nama Paket</label><input id="namaPaket" required>
        <label>Jenis</label><input id="jenisPaket" required>
        <label>Harga</label><input id="hargaPaket" required>
        <button class="primary" type="submit">Simpan Paket</button>
      </form>
      <h3>Paket Promo</h3>
      <form id="promoForm">
        <label>Nama Promo</label><input id="namaPromo">
        <label>Diskon (%)</label><input id="diskonPromo">
        <button class="primary" type="submit">Simpan Promo</button>
      </form>
      <div class="card"><table id="paketTable"><thead><tr><th>Nama</th><th>Jenis</th><th>Harga</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
    </div>

    <!-- Billing -->
    <div id="billing" class="section" style="display:none;">
      <h2>Billing</h2>
      <form id="billingForm">
        <label>No Internet</label><input id="billingInet" required>
        <label>Jumlah</label><input id="billingJumlah" required>
        <label>Pembayaran</label>
        <select id="billingBayar"><option value="full">Full</option><option value="tunggakan">Tunggakan</option></select>
        <button class="primary" type="submit">Simpan Billing</button>
      </form>
      <button class="primary" onclick="exportBilling()">Export File</button>
      <div class="card"><table id="billingTable"><thead><tr><th>No Inet</th><th>Jumlah</th><th>Bayar</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
    </div>

    <!-- Kas -->
    <div id="kas" class="section" style="display:none;">
      <h2>Kas</h2>
      <form id="kasForm">
        <label>Keterangan</label><input id="kasKet">
        <label>Jumlah (+/-)</label><input id="kasJumlah">
        <button class="primary" type="submit">Simpan</button>
      </form>
      <div class="grid">
        <div class="card"><canvas id="kasChart"></canvas></div>
        <div class="card"><div id="kasDetail"></div></div>
      </div>
    </div>

    <!-- Teknisi -->
    <div id="teknisi" class="section" style="display:none;">
      <h2>Teknisi</h2>
      <form id="teknisiForm">
        <label>Nama</label><input id="namaTeknisi">
        <label>No HP</label><input id="hpTeknisi">
        <label>Status</label><select id="statusTeknisi"><option>Standby</option><option>Sibuk</option></select>
        <button class="primary" type="submit">Simpan</button>
      </form>
      <div class="card"><table id="teknisiTable"><thead><tr><th>Nama</th><th>HP</th><th>Status</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
    </div>

    <!-- Gangguan -->
    <div id="gangguan" class="section" style="display:none;">
      <h2>Gangguan</h2>
      <button class="primary" onclick="openTiketManual()">Open Tiket</button>
      <div class="card"><table id="gangguanTable"><thead><tr><th>Tiket</th><th>No Inet</th><th>Jenis</th><th>Waktu</th><th>TTR</th><th>Status</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
      <div class="grid">
        <div class="card"><canvas id="gangguanChart"></canvas></div>
        <div class="card"><canvas id="gangguanRepeatChart"></canvas></div>
      </div>
    </div>

    <!-- Material -->
    <div id="material" class="section" style="display:none;">
      <h2>Material</h2>
      <form id="materialForm">
        <label>Nama</label><input id="namaMaterial">
        <label>Jenis</label><input id="jenisMaterial">
        <label>Merk</label><input id="merkMaterial">
        <label>SN</label><input id="snMaterial">
        <label>Stok Awal</label><input id="stokAwal">
        <button class="primary" type="submit">Simpan</button>
      </form>
      <div class="card"><table id="materialTable"><thead><tr><th>Nama</th><th>Jenis</th><th>Merk</th><th>SN</th><th>Stok</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
    </div>

    <!-- ODP -->
    <div id="odp" class="section" style="display:none;">
      <h2>ODP</h2>
      <input id="searchODP" placeholder="Cari ODP">
      <form id="odpForm">
        <label>Nama</label><input id="namaODP">
        <label>Kapasitas</label><input id="kapODP">
        <label>Feeder</label><input id="feederODP">
        <label>Distribusi</label><input id="distribusiODP">
        <label>Core</label><input id="coreODP">
        <label>Lokasi</label><input id="lokasiODP">
        <button class="primary" type="submit">Simpan</button>
      </form>
      <div class="card"><table id="odpTable"><thead><tr><th>Nama</th><th>Kapasitas</th><th>Feeder</th><th>Distribusi</th><th>Core</th><th>Lokasi</th><th>Pelanggan</th><th>Status</th><th>Aksi</th></tr></thead><tbody></tbody></table></div>
    </div>

    <!-- Edit ISP -->
    <div id="editisp" class="section" style="display:none;">
      <h2>Edit ISP</h2>
      <label>Nama ISP</label><input id="newISPName">
      <label>Logo ISP</label><input id="logoISP">
      <label>Alamat</label><input id="alamatISP">
      <label>Email</label><input id="emailISP">
      <label>Web</label><input id="webISP">
      <label>No CS</label><input id="csISP">
      <button class="primary" onclick="editISP()">Simpan</button>
    </div>
  </div>

<script>
  // ===== Firebase Config =====
  const firebaseConfig = {
    apiKey: "AIzaSyB-iBpZNC0YZBTAUzir7gJuU9kBQg82moc",
    authDomain: "dnt-network-7.firebaseapp.com",
    projectId: "dnt-network-7",
    storageBucket: "dnt-network-7.firebasestorage.app",
    messagingSenderId: "761179668371",
    appId: "1:761179668371:web:7d1468d0298041d4783266",
    measurementId: "G-CD3EQ350R4"
  };
  firebase.initializeApp(firebaseConfig);
  const db=firebase.firestore();

  // ===== Sidebar Toggle =====
  function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("minimized");
    document.querySelector(".main").classList.toggle("minimized");
  }
  function showSection(id,el){
    document.querySelectorAll(".section").forEach(s=>s.style.display="none");
    document.getElementById(id).style.display="block";
    document.querySelectorAll(".sidebar a").forEach(a=>a.classList.remove("active"));
    if(el) el.classList.add("active");
  }
  function logout(){alert("Logout sukses!");}
  function editISP(){
    document.getElementById("ispName").innerText=document.getElementById("newISPName").value||"Starnet üí´";
  }

  // ===== Dashboard Chart =====
  new Chart(document.getElementById("ispChart"),{
    type:"line",
    data:{labels:["Jan","Feb","Mar","Apr"],datasets:[
      {label:"Upload",data:[10,20,15,30],borderColor:"#3b82f6"},
      {label:"Download",data:[20,25,30,35],borderColor:"#22c55e"},
      {label:"Load Balance",data:[15,18,22,28],borderColor:"#f59e0b"}
    ]}
  });
</script>
</body>
</html>
